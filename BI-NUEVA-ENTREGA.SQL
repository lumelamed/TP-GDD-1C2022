--CREACION DE LAS DIMENSIONES


CREATE TABLE [COSMICOS].[BI_DIMENSION_CIRCUITO] (
  [CIRCUITO_CODIGO] int PRIMARY KEY,
  [CIRCUITO_NOMBRE] nvarchar(255),
  [CIRCUITO_PAIS] nvarchar(255)
 )
GO

CREATE TABLE [COSMICOS].[BI_DIMENSION_SECTOR] (
  [CODIGO_SECTOR] int PRIMARY KEY, 
  [SECTOR_DISTANCIA] decimal(18,2),
  [SECTOR_TIPO] nvarchar(255),
)
GO


CREATE TABLE [COSMICOS].[BI_DIMENSION_ESCUDERIA] (
  [CODIGO_ESCUDERIA] int PRIMARY KEY, 
  [ESCUDERIA_NOMBRE] varchar(50),
  [ESCUDERIA_NACIONALIDAD] varchar(50)
)
GO

CREATE TABLE [COSMICOS].[BI_DIMENSION_TIEMPO](
	[CODIGO_TIEMPO]  int PRIMARY KEY,
	[CUATRIMESTRE] int,
	[ANIO] int

)GO

CREATE TABLE [COSMICOS].[BI_DIMENSION_INCIDENTE](
	[CODIGO_INCIDENTE] int PRIMARY KEY,
	[TIPO_INCIDENTE] nvarchar(255),
	-- NO PUSE LA DESCRIPCION, PORQUE ES EL TIPO. 
)


CREATE TABLE [COSMICOS].[BI_DIMENSION_TELE](
	[CODIGO_TELE] int PRIMARY KEY,
	[NUMERO_VUELTA] decimal(18,0),
	[TIEMPO_VUELTA] decimal(18,10)
)

CREATE TABLE [COSMICOS].[BI_DIMENSION_COMPONENTES](
	[CODIGO_COMPONENTE] int PRIMARY KEY,
	[DESCRIPCION] nvarchar(255)
)

CREATE TABLE [COSMICOS].[BI_DIMENSION_AUTO] (
  [CODIGO_AUTO] int  PRIMARY KEY,
  [AUTO_NUMERO] int NOT NULL,
  [AUTO_MODELO] nvarchar(255)

)
GO

--CREACION DE LOS HECHOS
CREATE TABLE [COSMICOS].[HECHOS_AUTOS_Y_CARRERAS](
	[ID_HECHOS_AUTOS_Y_CARRERAS] int PRIMARY KEY IDENTITY(1,1),
	[CODIGO_TELE] int REFERENCES [COSMICOS].[BI_DIMENSION_TELE],
	-- en la otra tabla esta CIRCUITO CODIGO
	[CODIGO_CIRCUITO] int REFERENCES [COSMICOS].[BI_DIMENSION_CIRCUITO],
	[CODIGO_SECTOR] int REFERENCES [COSMICOS].[BI_DIMENSION_SECTOR],
	[CODIGO ESCUDERIA] int REFERENCES [COSMICOS].[BI_DIMENSION_ESCUDERIA],
	[CODIGO_COMPONENTE] int REFERENCES [COSMICOS].[BI_DIMENSION_COMPONENTES],
	[DESGASTE_COMPONENTE] decimal (18,6),
	[CONSUMO_COMBUSTIBLE] decimal (18,2),
	[MAXIMA_VELOCIDAD] decimal (18,2)

)

CREATE TABLE [COSMICOS].[HECHOS_INCIDENTES](
	[ID_HECHOS_INCIDENTES] int PRIMARY KEY IDENTITY(1,1),
	[CODIGO_CIRCUITO] int REFERENCES [COSMICOS].[BI_DIMENSION_CIRCUITO],
	[CODIGO_SECTOR] int REFERENCES [COSMICOS].[BI_DIMENSION_SECTOR],
	[CODIGO ESCUDERIA] int REFERENCES [COSMICOS].[BI_DIMENSION_ESCUDERIA],
	[CODIGO_TIEMPO] int REFERENCES [COSMICOS].[BI_DIMENSION_TIEMPO],
	[CODIGO_INCIDENTE] int REFERENCES [COSMICOS].[BI_DIMENSION_INCIDENTE] ,
	[CANTIDAD INCIDENTES] int
)

CREATE TABLE [COSMICOS].[HECHOS_PARADAS](
	[ID_HECHOS_PARADAS] int PRIMARY KEY IDENTITY(1,1),
	[CODIGO_CIRCUITO] int REFERENCES [COSMICOS].[BI_DIMENSION_CIRCUITO],
	[CODIGO ESCUDERIA] int REFERENCES [COSMICOS].[BI_DIMENSION_ESCUDERIA],
	[CODIGO_TIEMPO] int REFERENCES [COSMICOS].[BI_DIMENSION_TIEMPO],
	[TIEMPO_PARADA] decimal(18,2),
	[CANTIDAD_PARADAS] int

)

-- CARGA DE LAS DIMENSIONE


--CARGA DE LOS HECHOS



--VISTAS


--Q1
--Q2
--Q3
--Q4
--Q5
--Q6
--Q7
--Q8
--Q9
